<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìœ íŠœë¸Œ í† ê¸€ ì¬ìƒ/ì¼ì‹œì •ì§€ ì˜ˆì œ</title>
  <style>
    #player {
      position: absolute;
      left: -9999px; /* í™”ë©´ì—ì„œ ì™„ì „íˆ ìˆ¨ê¹€ */
      width: 1px;
      height: 1px;
      pointer-events: none;
    }
    #toggleBtn {
      font-size: 1.5rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>ğŸµ ìŒì•… ì»¨íŠ¸ë¡¤</h2>
  <button id="toggleBtn">â–¶</button>
  <button onclick="playPrevVideo()">â® ì´ì „ ì˜ìƒ</button>
  <button onclick="playNextVideo()">â­ ë‹¤ìŒ ì˜ìƒ</button>

  <div id="player"></div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player;
    let videoList = ['KgayxOF4Y7E', 'WPrhl0pFY_o', 'muHvXhbbN1M'];
    let currentIndex = 0;
    let state = 'stopped'; // 'playing' | 'paused'

    // IFrame API ì¤€ë¹„
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '1',
        width: '1',
        videoId: videoList[currentIndex],
        playerVars: { autoplay: 0, controls: 0, rel: 0, modestbranding: 1 },
        events: {
          onReady: () => console.log('Player Ready'),
          onStateChange: onPlayerStateChange
        }
      });
    }

    // í”Œë ˆì´ì–´ ìƒíƒœ ë³€í™” ê°ì§€
    function onPlayerStateChange(e) {
      if (e.data === YT.PlayerState.PLAYING) {
        state = 'playing';
      } else if (e.data === YT.PlayerState.PAUSED || e.data === YT.PlayerState.ENDED) {
        state = 'paused';
      }
      updateButtonIcon();
    }

    // ë²„íŠ¼ ê¸°ë³¸ ì•„ì´ì½˜ ì—…ë°ì´íŠ¸
    function updateButtonIcon() {
      document.getElementById('toggleBtn').innerText = (state === 'paused') ? 'â¸' : 'â–¶';
    }

    // hover ì‹œ ë³´ì—¬ì¤„ ì•„ì´ì½˜
    function getHoverIcon() {
      return (state === 'playing') ? 'â¸' : 'â–¶';
    }

    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('toggleBtn');

      btn.addEventListener('mouseenter', () => {
        btn.innerText = getHoverIcon();
      });
      btn.addEventListener('mouseleave', () => {
        updateButtonIcon();
      });
      btn.addEventListener('click', () => {
        if (state === 'playing') {
          player.pauseVideo();
        } else {
          player.playVideo();
        }
      });

      updateButtonIcon();
    });

    // ì´ì „ ì˜ìƒ ì¬ìƒ
    function playPrevVideo() {
      if (currentIndex > 0) {
        currentIndex--;
        player.loadVideoById(videoList[currentIndex]);
      } else {
        alert('ì²« ë²ˆì§¸ ì˜ìƒì…ë‹ˆë‹¤!');
      }
    }

    // ë‹¤ìŒ ì˜ìƒ ì¬ìƒ
    function playNextVideo() {
      if (currentIndex < videoList.length - 1) {
        currentIndex++;
        player.loadVideoById(videoList[currentIndex]);
      } else {
        alert('ë” ì´ìƒ ì˜ìƒì´ ì—†ì–´ìš”!');
      }
    }
  </script>
</body>
</html>
