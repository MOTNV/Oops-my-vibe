<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>유튜브 토글 재생/일시정지 예제</title>
  <style>
    #player {
      position: absolute;
      left: -9999px; /* 화면에서 완전히 숨김 */
      width: 1px;
      height: 1px;
      pointer-events: none;
    }
    #toggleBtn {
      font-size: 1.5rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>🎵 음악 컨트롤</h2>
  <button id="toggleBtn">▶</button>
  <button onclick="playPrevVideo()">⏮ 이전 영상</button>
  <button onclick="playNextVideo()">⏭ 다음 영상</button>

  <div id="player"></div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let player;
    let videoList = ['KgayxOF4Y7E', 'WPrhl0pFY_o', 'muHvXhbbN1M'];
    let currentIndex = 0;
    let state = 'stopped'; // 'playing' | 'paused'

    // IFrame API 준비
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        height: '1',
        width: '1',
        videoId: videoList[currentIndex],
        playerVars: { autoplay: 0, controls: 0, rel: 0, modestbranding: 1 },
        events: {
          onReady: () => console.log('Player Ready'),
          onStateChange: onPlayerStateChange
        }
      });
    }

    // 플레이어 상태 변화 감지
    function onPlayerStateChange(e) {
      if (e.data === YT.PlayerState.PLAYING) {
        state = 'playing';
      } else if (e.data === YT.PlayerState.PAUSED || e.data === YT.PlayerState.ENDED) {
        state = 'paused';
      }
      updateButtonIcon();
    }

    // 버튼 기본 아이콘 업데이트
    function updateButtonIcon() {
      document.getElementById('toggleBtn').innerText = (state === 'paused') ? '⏸' : '▶';
    }

    // hover 시 보여줄 아이콘
    function getHoverIcon() {
      return (state === 'playing') ? '⏸' : '▶';
    }

    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('toggleBtn');

      btn.addEventListener('mouseenter', () => {
        btn.innerText = getHoverIcon();
      });
      btn.addEventListener('mouseleave', () => {
        updateButtonIcon();
      });
      btn.addEventListener('click', () => {
        if (state === 'playing') {
          player.pauseVideo();
        } else {
          player.playVideo();
        }
      });

      updateButtonIcon();
    });

    // 이전 영상 재생
    function playPrevVideo() {
      if (currentIndex > 0) {
        currentIndex--;
        player.loadVideoById(videoList[currentIndex]);
      } else {
        alert('첫 번째 영상입니다!');
      }
    }

    // 다음 영상 재생
    function playNextVideo() {
      if (currentIndex < videoList.length - 1) {
        currentIndex++;
        player.loadVideoById(videoList[currentIndex]);
      } else {
        alert('더 이상 영상이 없어요!');
      }
    }
  </script>
</body>
</html>
